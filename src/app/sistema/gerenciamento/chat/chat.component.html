<div class="main-container">
  <div class="header-container">
    <h2>Chat de avisos</h2>
  </div>

  <div class="chat-container">
    <div class="chats">
      <app-search (searchChange)="onSearch($event)"></app-search>
      <div class="container-itens">
        <div class="chat-item" [class.selected]="selectedChat === 'Todos os setores'" (click)="selectChat('Todos os setores')">
            Todos os setores
            <span *ngIf="getNotificationCount('Todos os setores') > 0" class="notification-badge">{{ getNotificationCount('Todos os setores') }}</span>
        </div>
        <div class="chat-item" [class.selected]="selectedChat === 'Setor Fiscal'" (click)="selectChat('Setor Fiscal')">
            Setor Fiscal
            <span *ngIf="getNotificationCount('Setor Fiscal') > 0" class="notification-badge">{{ getNotificationCount('Setor Fiscal') }}</span>
        </div>
        <div class="chat-item" [class.selected]="selectedChat === 'Setor Pessoal'" (click)="selectChat('Setor Pessoal')">
            Setor Pessoal
            <span *ngIf="getNotificationCount('Setor Pessoal') > 0" class="notification-badge">{{ getNotificationCount('Setor Pessoal') }}</span>
        </div>
        <div class="chat-item" [class.selected]="selectedChat === 'Setor Contábil'" (click)="selectChat('Setor Contábil')">
            Setor Contábil
            <span *ngIf="getNotificationCount('Setor Contábil') > 0" class="notification-badge">{{ getNotificationCount('Setor Contábil') }}</span>
        </div>
        <div class="chat-item" [class.selected]="selectedChat === 'Setor Paralegal'" (click)="selectChat('Setor Paralegal')">
            Setor Paralegal
            <span *ngIf="getNotificationCount('Setor Paralegal') > 0" class="notification-badge">{{ getNotificationCount('Setor Paralegal') }}</span>
        </div>
        <div class="chat-item" [class.selected]="selectedChat === 'Setor Financeiro'" (click)="selectChat('Setor Financeiro')">
            Setor Financeiro
            <span *ngIf="getNotificationCount('Setor Financeiro') > 0" class="notification-badge">{{ getNotificationCount('Setor Financeiro') }}</span>
        </div>
      </div>
    </div>
    <div class="conversa-container">
        <header class="chat-header">
            <h3>{{ selectedChat }}</h3>
        </header>
        <section class="chat-messages"></section>
        <footer class="chat-input">
            <form [formGroup]="chatForm">
              <textarea placeholder="Digite uma mensagem..." formControlName="replymessage" (keyup.enter)="enviarMensagem()"></textarea>
              <button (click)="enviarMensagem()">
                <img src="assets/icones/send.svg" alt="Enviar" class="send-icon">
              </button>
            </form>
        </footer>
    </div>
  </div>
</div>