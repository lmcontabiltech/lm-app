<div class="main-container">
    <div class="breadcrumb-container">
        <div class="back-title">
            <img src="assets/icones/back-left-blue.svg" alt="Back" class="back-icon" (click)="goBack()">
            <span>Detalhes da noticia</span>
        </div>
    </div>
    <div class="actions">
        <h1>{{ noticia.titulo }}</h1>
        <p>Data de publicação: {{ noticia.publicadaEm }}</p>
    </div>
</div>
<div class="subMain-container">
    <div class="divisao">
        <p>Conteúdo da notícia</p>
        <hr class="line">
    </div>
    <div class="data-itens">
        <div class="item-data" *ngIf="noticia.arquivo as arquivo">
            <ng-container *ngIf="arquivo.documentoUrl; else noMidia">
                <ng-container *ngIf="isImage(arquivo.documentoUrl); else videoBlock">
                <img [src]="arquivo.documentoUrl" [alt]="arquivo.name || 'Arquivo da notícia'" class="noticia-arquivo-img" />
                </ng-container>
                <ng-template #videoBlock>
                <video [src]="arquivo.documentoUrl" controls class="noticia-arquivo-video"></video>
                </ng-template>
            </ng-container>
            <ng-template #noMidia></ng-template>
        </div>
        <div class="item-data">
           <div [innerHTML]="conteudoSanitizado"></div>
        </div>
    </div>

    <div class="data-itens">
        <div class="data-grid">
            <div class="item-data">
                <label>Destinatário</label>
                <div class="tags">
                    <ng-container *ngFor="let setor of noticia.setores">
                        <app-setor-tag [setor]="setor"></app-setor-tag>
                    </ng-container>
                </div>
            </div>
            <div class="item-data">
                <label>Autor</label>
                <p *ngIf="noticia.autor?.nome">{{ noticia.autor.nome || '-' }}</p>
            </div>
        </div>
    </div>
</div>

<div class="subMain-container" *ngIf="isAdmin">
    <div class="divisao">
        <p>Colaboradores</p>
        <hr class="line">
    </div>

    <div class="container-scroll" *ngIf="colaboradores.length > 0; else noColaboradores">
        <div class="data-grid-quad" *ngFor="let colaborador of colaboradoresPaginados">
            <div class="item-data-sub">
                <div class="perfil">
                    <div class="avatar" [ngStyle]="{'background-color': getRandomColor(colaborador.nome)}">
                        <img [src]="colaborador.fotoUrl" alt="Foto do colaborador" *ngIf="colaborador.fotoUrl; else defaultAvatar" />
                        <ng-template #defaultAvatar>
                            <span>{{ getInitial(colaborador.nome) }}</span>
                        </ng-template>
                    </div>
                    <span>{{ colaborador.username || '-' }}</span>
                </div>
            </div>
            <div class="item-data-sub">
                <app-setor-tag [setor]="colaborador.setor"></app-setor-tag>
            </div>
            <div class="item-data-sub">
                <p>{{ colaborador.email || '-' }}</p>
            </div>
        </div>
    </div>

     <ng-template #noColaboradores>
        <div class="no-colaboradores">
            <p>Nenhum colaborador visualizou esta notícia.</p>
        </div>
    </ng-template>

    <div class="paginacao">
        <app-pagination
            [paginaAtual]="paginaAtual"
            [totalItens]="totalItens"
            [itensPorPagina]="itensPorPagina"
            (paginaMudou)="onPaginaMudou($event)">
        </app-pagination>
    </div>  
</div>